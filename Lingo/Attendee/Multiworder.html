<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>class Lingo::Attendee::Multiworder - lingo Application documentation (v1.8.0)</title>

<link type="text/css" media="screen" href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../index.html">Home</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/lingo/attendee/multiworder.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="../BufferedAttendee.html">Lingo::BufferedAttendee</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-check_multiword_key">#check_multiword_key</a>
    
    <li><a href="#method-i-control">#control</a>
    
    <li><a href="#method-i-create_and_forward_multiword">#create_and_forward_multiword</a>
    
    <li><a href="#method-i-forward_number_of_token">#forward_number_of_token</a>
    
    <li><a href="#method-i-init">#init</a>
    
    <li><a href="#method-i-number_of_valid_tokens_in_buffer">#number_of_valid_tokens_in_buffer</a>
    
    <li><a href="#method-i-process_buffer">#process_buffer</a>
    
    <li><a href="#method-i-process_buffer-3F">#process_buffer?</a>
    
    <li><a href="#method-i-sort_result_len">#sort_result_len</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../COPYING.html">COPYING</a>
  
    <li class="file"><a href="../../ChangeLog.html">ChangeLog</a>
  
    <li class="file"><a href="../../README.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../../Lingo.html">Lingo</a>
  
    <li><a href="../../Lingo/AgendaItem.html">Lingo::AgendaItem</a>
  
    <li><a href="../../Lingo/Attendee.html">Lingo::Attendee</a>
  
    <li><a href="../../Lingo/Attendee/Abbreviator.html">Lingo::Attendee::Abbreviator</a>
  
    <li><a href="../../Lingo/Attendee/Debugger.html">Lingo::Attendee::Debugger</a>
  
    <li><a href="../../Lingo/Attendee/Decomposer.html">Lingo::Attendee::Decomposer</a>
  
    <li><a href="../../Lingo/Attendee/Dehyphenizer.html">Lingo::Attendee::Dehyphenizer</a>
  
    <li><a href="../../Lingo/Attendee/Formatter.html">Lingo::Attendee::Formatter</a>
  
    <li><a href="../../Lingo/Attendee/Multiworder.html">Lingo::Attendee::Multiworder</a>
  
    <li><a href="../../Lingo/Attendee/Noneword_filter.html">Lingo::Attendee::Noneword_filter</a>
  
    <li><a href="../../Lingo/Attendee/Objectfilter.html">Lingo::Attendee::Objectfilter</a>
  
    <li><a href="../../Lingo/Attendee/Sequencer.html">Lingo::Attendee::Sequencer</a>
  
    <li><a href="../../Lingo/Attendee/Synonymer.html">Lingo::Attendee::Synonymer</a>
  
    <li><a href="../../Lingo/Attendee/Textreader.html">Lingo::Attendee::Textreader</a>
  
    <li><a href="../../Lingo/Attendee/Textreader/PDFFilter.html">Lingo::Attendee::Textreader::PDFFilter</a>
  
    <li><a href="../../Lingo/Attendee/Textwriter.html">Lingo::Attendee::Textwriter</a>
  
    <li><a href="../../Lingo/Attendee/Tokenizer.html">Lingo::Attendee::Tokenizer</a>
  
    <li><a href="../../Lingo/Attendee/Variator.html">Lingo::Attendee::Variator</a>
  
    <li><a href="../../Lingo/Attendee/Vector_filter.html">Lingo::Attendee::Vector_filter</a>
  
    <li><a href="../../Lingo/Attendee/Wordsearcher.html">Lingo::Attendee::Wordsearcher</a>
  
    <li><a href="../../Lingo/BufferedAttendee.html">Lingo::BufferedAttendee</a>
  
    <li><a href="../../Lingo/CLI.html">Lingo::CLI</a>
  
    <li><a href="../../Lingo/Cachable.html">Lingo::Cachable</a>
  
    <li><a href="../../Lingo/Call.html">Lingo::Call</a>
  
    <li><a href="../../Lingo/Compositum.html">Lingo::Compositum</a>
  
    <li><a href="../../Lingo/Config.html">Lingo::Config</a>
  
    <li><a href="../../Lingo/Crypter.html">Lingo::Crypter</a>
  
    <li><a href="../../Lingo/Ctl.html">Lingo::Ctl</a>
  
    <li><a href="../../Lingo/DbmFile.html">Lingo::DbmFile</a>
  
    <li><a href="../../Lingo/Dictionary.html">Lingo::Dictionary</a>
  
    <li><a href="../../Lingo/Grammar.html">Lingo::Grammar</a>
  
    <li><a href="../../Lingo/Lexical.html">Lingo::Lexical</a>
  
    <li><a href="../../Lingo/LexicalHash.html">Lingo::LexicalHash</a>
  
    <li><a href="../../Lingo/Reportable.html">Lingo::Reportable</a>
  
    <li><a href="../../Lingo/ShowProgress.html">Lingo::ShowProgress</a>
  
    <li><a href="../../Lingo/StringA.html">Lingo::StringA</a>
  
    <li><a href="../../Lingo/Token.html">Lingo::Token</a>
  
    <li><a href="../../Lingo/Txt2DbmConverter.html">Lingo::Txt2DbmConverter</a>
  
    <li><a href="../../Lingo/TxtFile.html">Lingo::TxtFile</a>
  
    <li><a href="../../Lingo/TxtFile_Keyvalue.html">Lingo::TxtFile_Keyvalue</a>
  
    <li><a href="../../Lingo/TxtFile_Multikey.html">Lingo::TxtFile_Multikey</a>
  
    <li><a href="../../Lingo/TxtFile_Multivalue.html">Lingo::TxtFile_Multivalue</a>
  
    <li><a href="../../Lingo/TxtFile_Singleword.html">Lingo::TxtFile_Singleword</a>
  
    <li><a href="../../Lingo/TxtFile_Wordclass.html">Lingo::TxtFile_Wordclass</a>
  
    <li><a href="../../Lingo/Version.html">Lingo::Version</a>
  
    <li><a href="../../Lingo/Word.html">Lingo::Word</a>
  
    <li><a href="../../Lingo/WordSequence.html">Lingo::WordSequence</a>
  
    <li><a href="../../String.html">String</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Lingo::Attendee::Multiworder</h1>

  <div id="description" class="description">
    
<p>Mit der bisher beschriebenen Vorgehensweise werden die durch den <a
href="Tokenizer.html">Tokenizer</a> erkannten <a
href="../Token.html">Token</a> aufgelöst und in Words verwandelt und über
den <a href="Abbreviator.html">Abbreviator</a> und <a
href="Decomposer.html">Decomposer</a> auch Spezialfälle behandelt, die
einzelne Wörter betreffen. Um jedoch auch Namen wie z.B. John F. Kennedy
als Sinneinheit erkennen zu können, muss eine Analyse über mehrere Objekte
erfolgen. Dies ist die Hauptaufgabe des Multiworders. Der <a
href="Multiworder.html">Multiworder</a> analysiert die Teile des
Datenstroms, die z.B. durch Satzzeichen oder weiteren Einzelzeichen (z.B.
‘(’) begrenzt sind. Erkannte Mehrwortgruppen werden als zusätzliches Objekt
in den Datenstrom mit eingefügt.</p>

<h3 id="label-M%C3%B6gliche+Verlinkung">Mögliche Verlinkung</h3>
<dl class="rdoc-list note-list"><dt>Erwartet
<dd>
<p>Daten vom Typ <strong><a href="../Word.html">Word</a></strong> z.B. von <a
href="Wordsearcher.html">Wordsearcher</a>, <a
href="Decomposer.html">Decomposer</a>, Ocr_variator, <a
href="Multiworder.html">Multiworder</a></p>
</dd><dt>Erzeugt
<dd>
<p>Daten vom Typ <strong><a href="../Word.html">Word</a></strong> (mit
Attribut WA_MULTIWORD). Je erkannter Mehrwortgruppe wird ein zusätzliches
Word-Objekt in den Datenstrom eingefügt. Z.B. für Ocr_variator, <a
href="Sequencer.html">Sequencer</a>, <a
href="Noneword_filter.html">Noneword_filter</a>, <a
href="Vector_filter.html">Vector_filter</a></p>
</dd></dl>

<h3 id="label-Parameter">Parameter</h3>

<p>Kursiv dargestellte Parameter sind optional (ggf. mit Angabe der
Voreinstellung). Alle anderen Parameter müssen zwingend angegeben werden.</p>
<dl class="rdoc-list note-list"><dt><strong>in</strong>
<dd>
<p>siehe allgemeine Beschreibung des <a href="../Attendee.html">Attendee</a></p>
</dd><dt><strong>out</strong>
<dd>
<p>siehe allgemeine Beschreibung des <a href="../Attendee.html">Attendee</a></p>
</dd><dt><strong>source</strong>
<dd>
<p>siehe allgemeine Beschreibung des <a
href="../Dictionary.html">Dictionary</a></p>
</dd><dt><strong><em>mode</em></strong>
<dd>
<p>(Standard: all) siehe allgemeine Beschreibung des <a
href="../Dictionary.html">Dictionary</a></p>
</dd><dt><strong><em>stopper</em></strong>
<dd>
<p>(Standard: TA_PUNCTUATION, TA_OTHER) Gibt die Begrenzungen an, zwischen
denen der <a href="Multiworder.html">Multiworder</a> suchen soll, i.d.R.
Satzzeichen und Sonderzeichen, weil sie kaum in einer Mehrwortgruppen
vorkommen.</p>
</dd></dl>

<h3 id="label-Beispiele">Beispiele</h3>

<p>Bei der Verarbeitung einer normalen Textdatei mit der Ablaufkonfiguration
<code>t1.cfg</code></p>

<pre>meeting:
  attendees:
    - textreader:   { out: lines, files: '$(files)' }
    - tokenizer:    { in: lines, out: token }
    - abbreviator:   { in: token, out: abbrev, source: 'sys-abk' }
    - wordsearcher: { in: abbrev, out: words, source: 'sys-dic' }
    - decomposer:   { in: words, out: comps, source: 'sys-dic' }
    - multiworder:  { in: comps, out: multi, source: 'sys-mul' }
    - debugger:     { in: multi, prompt: 'out&gt;' }</pre>

<p>ergibt die Ausgabe über den Debugger: <code>lingo -c t1 test.txt</code></p>

<pre>out&gt; *FILE('test.txt')
out&gt; &lt;Sein = [(sein/s), (sein/v)]&gt;
out&gt; &lt;Name = [(name/s)]&gt;
out&gt; &lt;ist = [(sein/v)]&gt;
out&gt; &lt;johann van siegen|MUL = [(johann van siegen/m)]&gt;
out&gt; &lt;Johann = [(johann/e)]&gt;
out&gt; &lt;van = [(van/w)]&gt;
out&gt; &lt;Siegen = [(sieg/s), (siegen/v), (siegen/e)]&gt;
out&gt; :./PUNC:
out&gt; *EOL('test.txt')
out&gt; *EOF('test.txt')</pre>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="protected-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Protected Instance Methods</h3>

    
      <div id="method-i-control" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">control</span><span
            class="method-args">(cmd, par)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="control-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 124</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">control</span>(<span class="ruby-identifier">cmd</span>, <span class="ruby-identifier">par</span>)
  <span class="ruby-ivar">@mul_dic</span>.<span class="ruby-identifier">report</span>.<span class="ruby-identifier">each_pair</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span><span class="ruby-operator">|</span> <span class="ruby-identifier">set</span>(<span class="ruby-identifier">key</span>, <span class="ruby-identifier">value</span>) } <span class="ruby-keyword">if</span> <span class="ruby-identifier">cmd</span> <span class="ruby-operator">==</span> <span class="ruby-constant">STR_CMD_STATUS</span>

  <span class="ruby-comment"># Jedes Control-Object ist auch Auslöser der Verarbeitung</span>
  <span class="ruby-keyword">if</span> <span class="ruby-identifier">cmd</span> <span class="ruby-operator">==</span> <span class="ruby-constant">STR_CMD_RECORD</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">cmd</span> <span class="ruby-operator">==</span> <span class="ruby-constant">STR_CMD_EOF</span>
    <span class="ruby-ivar">@eof_handling</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-keyword">while</span> <span class="ruby-identifier">number_of_valid_tokens_in_buffer</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">1</span>
      <span class="ruby-identifier">process_buffer</span>
    <span class="ruby-keyword">end</span>
    <span class="ruby-identifier">forward_number_of_token</span>( <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">size</span>, <span class="ruby-keyword">false</span> )
    <span class="ruby-ivar">@eof_handling</span> = <span class="ruby-keyword">false</span>
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- control-source -->
          
        </div>

        

        
      </div><!-- control-method -->

    
      <div id="method-i-init" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">init</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="init-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 83</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">init</span>
  <span class="ruby-comment"># Parameter verwerten</span>
  <span class="ruby-ivar">@stopper</span> = <span class="ruby-identifier">get_array</span>(<span class="ruby-string">'stopper'</span>, <span class="ruby-constant">TA_PUNCTUATION</span><span class="ruby-operator">+</span><span class="ruby-string">','</span><span class="ruby-operator">+</span><span class="ruby-constant">TA_OTHER</span>).<span class="ruby-identifier">collect</span> {<span class="ruby-operator">|</span><span class="ruby-identifier">s</span><span class="ruby-operator">|</span> <span class="ruby-identifier">s</span>.<span class="ruby-identifier">upcase</span> }

  <span class="ruby-comment"># Wörterbuch bereitstellen</span>
  <span class="ruby-identifier">mul_src</span> = <span class="ruby-identifier">get_array</span>(<span class="ruby-string">'source'</span>)
  <span class="ruby-identifier">mul_mod</span> = <span class="ruby-identifier">get_key</span>(<span class="ruby-string">'mode'</span>, <span class="ruby-string">'all'</span>)
  <span class="ruby-ivar">@mul_dic</span> = <span class="ruby-constant">Dictionary</span>.<span class="ruby-identifier">new</span>({<span class="ruby-string">'source'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">mul_src</span>, <span class="ruby-string">'mode'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">mul_mod</span>}, <span class="ruby-ivar">@lingo</span>)

  <span class="ruby-comment"># combine lexical variants?</span>
  <span class="ruby-comment">#</span>
  <span class="ruby-comment"># false = old behaviour</span>
  <span class="ruby-comment"># true  = first match</span>
  <span class="ruby-comment"># 'all' = all matches</span>
  <span class="ruby-ivar">@combine</span>  = <span class="ruby-identifier">get_key</span>(<span class="ruby-string">'combine'</span>, <span class="ruby-keyword">false</span>)
  <span class="ruby-ivar">@all_keys</span> = <span class="ruby-ivar">@combine</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">String</span>) <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@combine</span>.<span class="ruby-identifier">downcase</span> <span class="ruby-operator">==</span> <span class="ruby-string">'all'</span>

  <span class="ruby-comment"># Lexikalisierungs-Wörterbuch aus angegebenen Quellen ermitteln</span>
  <span class="ruby-identifier">lex_src</span>, <span class="ruby-identifier">lex_mod</span>, <span class="ruby-identifier">databases</span> = <span class="ruby-keyword">nil</span>, <span class="ruby-keyword">nil</span>, <span class="ruby-ivar">@lingo</span>.<span class="ruby-identifier">dictionary_config</span>[<span class="ruby-string">'databases'</span>]
  <span class="ruby-identifier">mul_src</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">src</span><span class="ruby-operator">|</span>
    <span class="ruby-identifier">this_src</span>, <span class="ruby-identifier">this_mod</span> = <span class="ruby-identifier">databases</span>[<span class="ruby-identifier">src</span>].<span class="ruby-identifier">values_at</span>(<span class="ruby-string">'use-lex'</span>, <span class="ruby-string">'lex-mode'</span>)
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">lex_src</span>.<span class="ruby-identifier">nil?</span> <span class="ruby-operator">||</span> <span class="ruby-identifier">lex_src</span><span class="ruby-operator">==</span><span class="ruby-identifier">this_src</span>
      <span class="ruby-identifier">lex_src</span>, <span class="ruby-identifier">lex_mod</span> = <span class="ruby-identifier">this_src</span>, <span class="ruby-identifier">this_mod</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">forward</span>(<span class="ruby-constant">STR_CMD_WARN</span>, <span class="ruby-node">&quot;Die Mehrwortwörterbücher #{mul_src.join(',')} sind mit unterschiedlichen Wörterbüchern lexikalisiert worden&quot;</span>)
    <span class="ruby-keyword">end</span>
  }
  <span class="ruby-identifier">lex_mod</span> = <span class="ruby-identifier">get_key</span>(<span class="ruby-string">'lex-mode'</span>, <span class="ruby-identifier">lex_mod</span> <span class="ruby-operator">||</span> <span class="ruby-string">'first'</span>)
  <span class="ruby-ivar">@lex_dic</span> = <span class="ruby-constant">Dictionary</span>.<span class="ruby-identifier">new</span>({<span class="ruby-string">'source'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">lex_src</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">STRING_SEPERATOR_PATTERN</span>), <span class="ruby-string">'mode'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">lex_mod</span>}, <span class="ruby-ivar">@lingo</span>)
  <span class="ruby-ivar">@lex_gra</span> = <span class="ruby-constant">Grammar</span>.<span class="ruby-identifier">new</span>({<span class="ruby-string">'source'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">lex_src</span>.<span class="ruby-identifier">split</span>(<span class="ruby-constant">STRING_SEPERATOR_PATTERN</span>), <span class="ruby-string">'mode'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">lex_mod</span>}, <span class="ruby-ivar">@lingo</span>)

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@combine</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-identifier">has_key?</span>(<span class="ruby-string">'use-syn'</span>)
    <span class="ruby-identifier">syn_src</span> = <span class="ruby-identifier">get_array</span>(<span class="ruby-string">'use-syn'</span>)
    <span class="ruby-identifier">syn_mod</span> = <span class="ruby-identifier">get_key</span>(<span class="ruby-string">'syn-mode'</span>, <span class="ruby-string">'all'</span>)
    <span class="ruby-ivar">@syn_dic</span> = <span class="ruby-constant">Dictionary</span>.<span class="ruby-identifier">new</span>({<span class="ruby-string">'source'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">syn_src</span>, <span class="ruby-string">'mode'</span>=<span class="ruby-operator">&gt;</span><span class="ruby-identifier">syn_mod</span>}, <span class="ruby-ivar">@lingo</span>)
  <span class="ruby-keyword">end</span>

  <span class="ruby-ivar">@number_of_expected_tokens_in_buffer</span> = <span class="ruby-value">3</span>
  <span class="ruby-ivar">@eof_handling</span> = <span class="ruby-keyword">false</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- init-source -->
          
        </div>

        

        
      </div><!-- init-method -->

    
      <div id="method-i-process_buffer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">process_buffer</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="process_buffer-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 142</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process_buffer</span>
  <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@buffer</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">form</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CHAR_PUNCT</span>
    <span class="ruby-comment"># Prüfe 3er Schlüssel</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">check_multiword_key</span>( <span class="ruby-value">3</span> )
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-comment"># 3er Schlüssel gefunden</span>
      <span class="ruby-identifier">lengths</span> = <span class="ruby-identifier">sort_result_len</span>( <span class="ruby-identifier">result</span> )
      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">lengths</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">&gt;</span> <span class="ruby-value">3</span>
        <span class="ruby-comment"># Längster erkannter Schlüssel = 3</span>
        <span class="ruby-identifier">create_and_forward_multiword</span>( <span class="ruby-value">3</span>, <span class="ruby-identifier">result</span> )
        <span class="ruby-identifier">forward_number_of_token</span>( <span class="ruby-value">3</span> )
        <span class="ruby-keyword">return</span>
      <span class="ruby-keyword">else</span>
        <span class="ruby-comment"># Längster erkannter Schlüssel &gt; 3, Buffer voll genug?</span>
        <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">size</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-identifier">lengths</span>[<span class="ruby-value">0</span>] <span class="ruby-operator">||</span> <span class="ruby-ivar">@eof_handling</span>
          <span class="ruby-ivar">@number_of_expected_tokens_in_buffer</span> = <span class="ruby-identifier">lengths</span>[<span class="ruby-value">0</span>]
          <span class="ruby-keyword">return</span>
        <span class="ruby-keyword">else</span>
          <span class="ruby-comment"># Buffer voll genug, Verarbeitung kann beginnen</span>
          <span class="ruby-identifier">catch</span>( <span class="ruby-value">:forward_one</span> ) <span class="ruby-keyword">do</span>
            <span class="ruby-identifier">lengths</span>.<span class="ruby-identifier">each</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">len</span><span class="ruby-operator">|</span>
              <span class="ruby-identifier">result</span> = <span class="ruby-identifier">check_multiword_key</span>( <span class="ruby-identifier">len</span> )
              <span class="ruby-keyword">unless</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">empty?</span>
                <span class="ruby-identifier">create_and_forward_multiword</span>( <span class="ruby-identifier">len</span>, <span class="ruby-identifier">result</span> )
                <span class="ruby-identifier">forward_number_of_token</span>( <span class="ruby-identifier">len</span> )
                <span class="ruby-identifier">throw</span> <span class="ruby-value">:forward_one</span>
              <span class="ruby-keyword">end</span>
            <span class="ruby-keyword">end</span>

            <span class="ruby-comment"># Keinen Match gefunden</span>
            <span class="ruby-identifier">forward_number_of_token</span>( <span class="ruby-value">1</span> )
          <span class="ruby-keyword">end</span>

          <span class="ruby-ivar">@number_of_expected_tokens_in_buffer</span> = <span class="ruby-value">3</span>
          <span class="ruby-identifier">process_buffer</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">process_buffer?</span>
          <span class="ruby-keyword">return</span>
        <span class="ruby-keyword">end</span>
      <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>

    <span class="ruby-comment"># Prüfe 2er Schlüssel</span>
    <span class="ruby-identifier">result</span> = <span class="ruby-identifier">check_multiword_key</span>( <span class="ruby-value">2</span> )
    <span class="ruby-keyword">unless</span> <span class="ruby-identifier">result</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">create_and_forward_multiword</span>( <span class="ruby-value">2</span>, <span class="ruby-identifier">result</span> )
      <span class="ruby-identifier">forward_number_of_token</span>( <span class="ruby-value">1</span> )
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>

  <span class="ruby-comment"># Buffer weiterschaufeln</span>
  <span class="ruby-identifier">forward_number_of_token</span>( <span class="ruby-value">1</span>, <span class="ruby-keyword">false</span> )
  <span class="ruby-ivar">@number_of_expected_tokens_in_buffer</span> = <span class="ruby-value">3</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- process_buffer-source -->
          
        </div>

        

        
      </div><!-- process_buffer-method -->

    
      <div id="method-i-process_buffer-3F" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">process_buffer?</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="process_buffer-3F-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 138</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">process_buffer?</span>
  <span class="ruby-identifier">number_of_valid_tokens_in_buffer</span> <span class="ruby-operator">&gt;=</span> <span class="ruby-ivar">@number_of_expected_tokens_in_buffer</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- process_buffer-3F-source -->
          
        </div>

        

        
      </div><!-- process_buffer-3F-method -->

    
    </section><!-- protected-instance-method-details -->
  
     <section id="private-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Private Instance Methods</h3>

    
      <div id="method-i-check_multiword_key" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">check_multiword_key</span><span
            class="method-args">( len )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Prüft einen definiert langen Schlüssel ab Position 0 im Buffer</p>
          

          
          <div class="method-source-code" id="check_multiword_key-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 246</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">check_multiword_key</span>( <span class="ruby-identifier">len</span> )
  <span class="ruby-keyword">return</span> [] <span class="ruby-keyword">if</span> <span class="ruby-identifier">number_of_valid_tokens_in_buffer</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">len</span>

  <span class="ruby-comment"># Wortformen aus der Wortliste auslesen</span>
  <span class="ruby-identifier">sequence</span> = <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">obj</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">next</span> [<span class="ruby-identifier">obj</span>] <span class="ruby-keyword">unless</span> <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">StringA</span>)

    <span class="ruby-identifier">form</span> = <span class="ruby-identifier">obj</span>.<span class="ruby-identifier">form</span>
    <span class="ruby-keyword">next</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">form</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CHAR_PUNCT</span>

    <span class="ruby-identifier">word</span> = <span class="ruby-ivar">@lex_dic</span>.<span class="ruby-identifier">find_word</span>(<span class="ruby-identifier">form</span>)
    <span class="ruby-identifier">word</span> = <span class="ruby-ivar">@lex_gra</span>.<span class="ruby-identifier">find_compositum</span>(<span class="ruby-identifier">form</span>) <span class="ruby-keyword">if</span> <span class="ruby-identifier">word</span>.<span class="ruby-identifier">attr</span> <span class="ruby-operator">==</span> <span class="ruby-constant">WA_UNKNOWN</span>

    <span class="ruby-identifier">lexicals</span> = <span class="ruby-identifier">word</span>.<span class="ruby-identifier">attr</span> <span class="ruby-operator">==</span> <span class="ruby-constant">WA_KOMPOSITUM</span> <span class="ruby-operator">?</span>
      [<span class="ruby-identifier">word</span>.<span class="ruby-identifier">lexicals</span>.<span class="ruby-identifier">first</span>] <span class="ruby-operator">:</span> <span class="ruby-identifier">word</span>.<span class="ruby-identifier">lexicals</span>.<span class="ruby-identifier">dup</span>

    <span class="ruby-identifier">lexicals</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">word</span> <span class="ruby-keyword">if</span> <span class="ruby-identifier">lexicals</span>.<span class="ruby-identifier">empty?</span>
    <span class="ruby-identifier">lexicals</span> <span class="ruby-operator">+=</span> <span class="ruby-ivar">@syn_dic</span>.<span class="ruby-identifier">find_synonyms</span>(<span class="ruby-identifier">word</span>) <span class="ruby-keyword">if</span> <span class="ruby-ivar">@syn_dic</span>

    <span class="ruby-identifier">lexicals</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">lex</span><span class="ruby-operator">|</span> <span class="ruby-identifier">lex</span>.<span class="ruby-identifier">form</span> }.<span class="ruby-identifier">uniq</span>
  }.<span class="ruby-identifier">compact</span>[<span class="ruby-value">0</span>, <span class="ruby-identifier">len</span>]

  <span class="ruby-keyword">if</span> <span class="ruby-ivar">@combine</span>
    <span class="ruby-identifier">keys</span>, <span class="ruby-identifier">muls</span> = [], []

    <span class="ruby-identifier">sequence</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">forms</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">keys</span> = <span class="ruby-identifier">forms</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">form</span><span class="ruby-operator">|</span>
        <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">empty?</span> <span class="ruby-operator">?</span> <span class="ruby-identifier">form</span> <span class="ruby-operator">:</span> <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span> <span class="ruby-node">&quot;#{key} #{form}&quot;</span> }
      }.<span class="ruby-identifier">flatten</span>(<span class="ruby-value">1</span>)
    }

    <span class="ruby-identifier">keys</span>.<span class="ruby-identifier">each</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">key</span><span class="ruby-operator">|</span>
      <span class="ruby-identifier">mul</span> = <span class="ruby-ivar">@mul_dic</span>.<span class="ruby-identifier">select</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">downcase</span>)

      <span class="ruby-keyword">unless</span> <span class="ruby-identifier">mul</span>.<span class="ruby-identifier">empty?</span>
        <span class="ruby-identifier">muls</span>.<span class="ruby-identifier">concat</span>(<span class="ruby-identifier">mul</span>)
        <span class="ruby-keyword">break</span> <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@all_keys</span>
      <span class="ruby-keyword">end</span>
    }

    <span class="ruby-identifier">muls</span>.<span class="ruby-identifier">uniq</span>
  <span class="ruby-keyword">else</span>
    <span class="ruby-identifier">key</span> = <span class="ruby-identifier">sequence</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">forms</span><span class="ruby-operator">|</span> <span class="ruby-identifier">forms</span>.<span class="ruby-identifier">first</span> }.<span class="ruby-identifier">join</span>(<span class="ruby-string">' '</span>)
    <span class="ruby-ivar">@mul_dic</span>.<span class="ruby-identifier">select</span>(<span class="ruby-identifier">key</span>.<span class="ruby-identifier">downcase</span>)
  <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- check_multiword_key-source -->
          
        </div>

        

        
      </div><!-- check_multiword_key-method -->

    
      <div id="method-i-create_and_forward_multiword" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">create_and_forward_multiword</span><span
            class="method-args">( len, lexicals )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="create_and_forward_multiword-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 197</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">create_and_forward_multiword</span>( <span class="ruby-identifier">len</span>, <span class="ruby-identifier">lexicals</span> )
  <span class="ruby-comment"># Form aus Buffer auslesen und Teile markieren</span>
  <span class="ruby-identifier">pos</span> = <span class="ruby-value">0</span>
  <span class="ruby-identifier">form_parts</span> = []
  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer</span>[<span class="ruby-identifier">pos</span>].<span class="ruby-identifier">form</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CHAR_PUNCT</span>
      <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">delete_at</span>( <span class="ruby-identifier">pos</span> )
      <span class="ruby-identifier">form_parts</span>[<span class="ruby-value">-1</span>] <span class="ruby-operator">+=</span> <span class="ruby-constant">CHAR_PUNCT</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-ivar">@buffer</span>[<span class="ruby-identifier">pos</span>].<span class="ruby-identifier">attr</span> = <span class="ruby-constant">WA_UNKMULPART</span> <span class="ruby-keyword">if</span> <span class="ruby-ivar">@buffer</span>[<span class="ruby-identifier">pos</span>].<span class="ruby-identifier">attr</span> <span class="ruby-operator">==</span> <span class="ruby-constant">WA_UNKNOWN</span>
      <span class="ruby-identifier">form_parts</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-ivar">@buffer</span>[<span class="ruby-identifier">pos</span>].<span class="ruby-identifier">form</span>
      <span class="ruby-identifier">pos</span> <span class="ruby-operator">+=</span> <span class="ruby-value">1</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">while</span> <span class="ruby-identifier">pos</span> <span class="ruby-operator">&lt;</span> <span class="ruby-identifier">len</span>

  <span class="ruby-identifier">form</span> = <span class="ruby-identifier">form_parts</span>.<span class="ruby-identifier">join</span>( <span class="ruby-string">' '</span> )

  <span class="ruby-comment"># Multiword erstellen</span>
  <span class="ruby-identifier">word</span> = <span class="ruby-constant">Word</span>.<span class="ruby-identifier">new</span>( <span class="ruby-identifier">form</span>, <span class="ruby-constant">WA_MULTIWORD</span> )
  <span class="ruby-identifier">word</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-identifier">lexicals</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">lex</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">lex</span>.<span class="ruby-identifier">is_a?</span>(<span class="ruby-constant">Lexical</span>)) <span class="ruby-operator">?</span> <span class="ruby-identifier">lex</span> <span class="ruby-operator">:</span> <span class="ruby-keyword">nil</span> }.<span class="ruby-identifier">compact</span>  <span class="ruby-comment"># FIXME 1.60 - Ausstieg bei &quot;*5&quot; im Synonymer</span>

  <span class="ruby-comment"># Forword Multiword</span>
  <span class="ruby-identifier">forward</span>( <span class="ruby-identifier">word</span> )
<span class="ruby-keyword">end</span></pre>
          </div><!-- create_and_forward_multiword-source -->
          
        </div>

        

        
      </div><!-- create_and_forward_multiword-method -->

    
      <div id="method-i-forward_number_of_token" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">forward_number_of_token</span><span
            class="method-args">( len, count_punc = true )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Leitet ‘len’ <a href="../Token.html">Token</a> weiter</p>
          

          
          <div class="method-source-code" id="forward_number_of_token-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">forward_number_of_token</span>( <span class="ruby-identifier">len</span>, <span class="ruby-identifier">count_punc</span> = <span class="ruby-keyword">true</span> )
  <span class="ruby-keyword">begin</span>
    <span class="ruby-keyword">unless</span> <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">empty?</span>
      <span class="ruby-identifier">forward</span>( <span class="ruby-ivar">@buffer</span>[<span class="ruby-value">0</span>] )
      <span class="ruby-identifier">len</span> <span class="ruby-operator">-=</span> <span class="ruby-value">1</span> <span class="ruby-keyword">unless</span> <span class="ruby-identifier">count_punc</span> <span class="ruby-operator">&amp;&amp;</span> <span class="ruby-ivar">@buffer</span>[<span class="ruby-value">0</span>].<span class="ruby-identifier">form</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CHAR_PUNCT</span>
      <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">delete_at</span>( <span class="ruby-value">0</span> )
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span> <span class="ruby-keyword">while</span> <span class="ruby-identifier">len</span> <span class="ruby-operator">&gt;</span> <span class="ruby-value">0</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- forward_number_of_token-source -->
          
        </div>

        

        
      </div><!-- forward_number_of_token-method -->

    
      <div id="method-i-number_of_valid_tokens_in_buffer" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">number_of_valid_tokens_in_buffer</span><span
            class="method-args">()</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Liefert die Anzahl gültiger <a href="../Token.html">Token</a> zurück</p>
          

          
          <div class="method-source-code" id="number_of_valid_tokens_in_buffer-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 294</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">number_of_valid_tokens_in_buffer</span>
  <span class="ruby-ivar">@buffer</span>.<span class="ruby-identifier">collect</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">token</span><span class="ruby-operator">|</span> (<span class="ruby-identifier">token</span>.<span class="ruby-identifier">form</span> <span class="ruby-operator">==</span> <span class="ruby-constant">CHAR_PUNCT</span>) <span class="ruby-operator">?</span> <span class="ruby-keyword">nil</span> <span class="ruby-operator">:</span> <span class="ruby-value">1</span> }.<span class="ruby-identifier">compact</span>.<span class="ruby-identifier">size</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- number_of_valid_tokens_in_buffer-source -->
          
        </div>

        

        
      </div><!-- number_of_valid_tokens_in_buffer-method -->

    
      <div id="method-i-sort_result_len" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">sort_result_len</span><span
            class="method-args">( result )</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          <p>Ermittelt die maximale Ergebnislänge</p>
          

          
          <div class="method-source-code" id="sort_result_len-source">
            <pre><span class="ruby-comment"># File lib/lingo/attendee/multiworder.rb, line 234</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">sort_result_len</span>( <span class="ruby-identifier">result</span> )
  <span class="ruby-identifier">result</span>.<span class="ruby-identifier">collect</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">res</span><span class="ruby-operator">|</span>
    <span class="ruby-keyword">if</span> <span class="ruby-identifier">res</span>.<span class="ruby-identifier">is_a?</span>( <span class="ruby-constant">Lexical</span> )
      <span class="ruby-identifier">res</span>.<span class="ruby-identifier">form</span>.<span class="ruby-identifier">split</span>( <span class="ruby-string">' '</span> ).<span class="ruby-identifier">size</span>
    <span class="ruby-keyword">else</span>
      <span class="ruby-identifier">res</span> <span class="ruby-operator">=~</span> <span class="ruby-regexp">%r^\*(\d+)/</span>
      <span class="ruby-node">$1</span>.<span class="ruby-identifier">to_i</span>
    <span class="ruby-keyword">end</span>
  <span class="ruby-keyword">end</span>.<span class="ruby-identifier">sort</span>.<span class="ruby-identifier">reverse</span>
<span class="ruby-keyword">end</span></pre>
          </div><!-- sort_result_len-source -->
          
        </div>

        

        
      </div><!-- sort_result_len-method -->

    
    </section><!-- private-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.12.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

