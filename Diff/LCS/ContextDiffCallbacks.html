<!DOCTYPE html>

<html>
<head>
<meta content="text/html; charset=UTF-8" http-equiv="Content-Type">

<title>Class: Diff::LCS::ContextDiffCallbacks</title>

<link type="text/css" media="screen" href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script type="text/javascript" charset="utf-8" src="../../js/jquery.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/navigation.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search_index.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/search.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/searcher.js"></script>
<script type="text/javascript" charset="utf-8" src="../../js/darkfish.js"></script>


<body id="top" class="class">
<nav id="metadata">
  <nav id="home-section" class="section">
  <h3 class="section-header">
    <a href="../../index.html">Home</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </h3>
</nav>


  <nav id="search-section" class="section project-section" class="initially-hidden">
  <form action="#" method="get" accept-charset="utf-8">
    <h3 class="section-header">
      <input type="text" name="search" placeholder="Search" id="search-field"
             title="Type to search, Up and Down to navigate, Enter to load">
    </h3>
  </form>

  <ul id="search-results" class="initially-hidden"></ul>
</nav>


  <div id="file-metadata">
    <nav id="file-list-section" class="section">
  <h3 class="section-header">Defined In</h3>
  <ul>
    <li>lib/diff/lcs/callbacks.rb
  </ul>
</nav>

    
  </div>

  <div id="class-metadata">
    
    <nav id="parent-class-section" class="section">
  <h3 class="section-header">Parent</h3>
  
  <p class="link"><a href="DiffCallbacks.html">Diff::LCS::DiffCallbacks</a>
  
</nav>

    
    <!-- Method Quickref -->
<nav id="method-list-section" class="section">
  <h3 class="section-header">Methods</h3>

  <ul class="link-list">
    
    <li><a href="#method-i-change">#change</a>
    
    <li><a href="#method-i-discard_a">#discard_a</a>
    
    <li><a href="#method-i-discard_b">#discard_b</a>
    
  </ul>
</nav>

  </div>

  <div id="project-metadata">
    <nav id="fileindex-section" class="section project-section">
  <h3 class="section-header">Pages</h3>

  <ul>
  
    <li class="file"><a href="../../COPYING.html">COPYING</a>
  
    <li class="file"><a href="../../ChangeLog.html">ChangeLog</a>
  
    <li class="file"><a href="../../README.html">README</a>
  
  </ul>
</nav>

    <nav id="classindex-section" class="section project-section">
  <h3 class="section-header">Class and Module Index</h3>

  <ul class="link-list">
  
    <li><a href="../../Attendee.html">Attendee</a>
  
    <li><a href="../../Attendee/Abbreviator.html">Attendee::Abbreviator</a>
  
    <li><a href="../../Attendee/Debugger.html">Attendee::Debugger</a>
  
    <li><a href="../../Attendee/Decomposer.html">Attendee::Decomposer</a>
  
    <li><a href="../../Attendee/Dehyphenizer.html">Attendee::Dehyphenizer</a>
  
    <li><a href="../../Attendee/Formatter.html">Attendee::Formatter</a>
  
    <li><a href="../../Attendee/Helper.html">Attendee::Helper</a>
  
    <li><a href="../../Attendee/Multiworder.html">Attendee::Multiworder</a>
  
    <li><a href="../../Attendee/Noneword_filter.html">Attendee::Noneword_filter</a>
  
    <li><a href="../../Attendee/Objectfilter.html">Attendee::Objectfilter</a>
  
    <li><a href="../../Attendee/Sequencer.html">Attendee::Sequencer</a>
  
    <li><a href="../../Attendee/Synonymer.html">Attendee::Synonymer</a>
  
    <li><a href="../../Attendee/Textreader.html">Attendee::Textreader</a>
  
    <li><a href="../../Attendee/Textreader/PDFFilter.html">Attendee::Textreader::PDFFilter</a>
  
    <li><a href="../../Attendee/Textwriter.html">Attendee::Textwriter</a>
  
    <li><a href="../../Attendee/Tokenizer.html">Attendee::Tokenizer</a>
  
    <li><a href="../../Attendee/Variator.html">Attendee::Variator</a>
  
    <li><a href="../../Attendee/Vector_filter.html">Attendee::Vector_filter</a>
  
    <li><a href="../../Attendee/Wordsearcher.html">Attendee::Wordsearcher</a>
  
    <li><a href="../../Diff.html">Diff</a>
  
    <li><a href="../../Diff/LCS.html">Diff::LCS</a>
  
    <li><a href="../../Diff/LCS/DefaultCallbacks.html">Diff::LCS::BalancedCallbacks</a>
  
    <li><a href="../../Diff/LCS/Block.html">Diff::LCS::Block</a>
  
    <li><a href="../../Diff/LCS/Change.html">Diff::LCS::Change</a>
  
    <li><a href="../../Diff/LCS/ChangeTypeTests.html">Diff::LCS::ChangeTypeTests</a>
  
    <li><a href="../../Diff/LCS/ContextChange.html">Diff::LCS::ContextChange</a>
  
    <li><a href="../../Diff/LCS/ContextDiffCallbacks.html">Diff::LCS::ContextDiffCallbacks</a>
  
    <li><a href="../../Diff/LCS/DefaultCallbacks.html">Diff::LCS::DefaultCallbacks</a>
  
    <li><a href="../../Diff/LCS/DiffCallbacks.html">Diff::LCS::DiffCallbacks</a>
  
    <li><a href="../../Diff/LCS/Hunk.html">Diff::LCS::Hunk</a>
  
    <li><a href="../../Diff/LCS/Ldiff.html">Diff::LCS::Ldiff</a>
  
    <li><a href="../../Diff/LCS/SDiffCallbacks.html">Diff::LCS::SDiffCallbacks</a>
  
    <li><a href="../../Diff/LCS/DefaultCallbacks.html">Diff::LCS::SequenceCallbacks</a>
  
    <li><a href="../../Lingo.html">Lingo</a>
  
    <li><a href="../../Lingo/Version.html">Lingo::Version</a>
  
    <li><a href="../../AgendaItem.html">AgendaItem</a>
  
    <li><a href="../../Array.html">Array</a>
  
    <li><a href="../../BufferedAttendee.html">BufferedAttendee</a>
  
    <li><a href="../../Cachable.html">Cachable</a>
  
    <li><a href="../../Compositum.html">Compositum</a>
  
    <li><a href="../../Crypter.html">Crypter</a>
  
    <li><a href="../../DbmFile.html">DbmFile</a>
  
    <li><a href="../../Dictionary.html">Dictionary</a>
  
    <li><a href="../../File.html">File</a>
  
    <li><a href="../../Grammar.html">Grammar</a>
  
    <li><a href="../../IO.html">IO</a>
  
    <li><a href="../../Lexical.html">Lexical</a>
  
    <li><a href="../../LexicalHash.html">LexicalHash</a>
  
    <li><a href="../../LingoConfig.html">LingoConfig</a>
  
    <li><a href="../../Meeting.html">Meeting</a>
  
    <li><a href="../../Object.html">Object</a>
  
    <li><a href="../../Pathname.html">Pathname</a>
  
    <li><a href="../../Reportable.html">Reportable</a>
  
    <li><a href="../../ShowPercent.html">ShowPercent</a>
  
    <li><a href="../../String.html">String</a>
  
    <li><a href="../../StringA.html">StringA</a>
  
    <li><a href="../../Token.html">Token</a>
  
    <li><a href="../../Txt2DbmConverter.html">Txt2DbmConverter</a>
  
    <li><a href="../../TxtFile.html">TxtFile</a>
  
    <li><a href="../../TxtFile_Keyvalue.html">TxtFile_Keyvalue</a>
  
    <li><a href="../../TxtFile_Multikey.html">TxtFile_Multikey</a>
  
    <li><a href="../../TxtFile_Multivalue.html">TxtFile_Multivalue</a>
  
    <li><a href="../../TxtFile_Singleword.html">TxtFile_Singleword</a>
  
    <li><a href="../../TxtFile_Wordclass.html">TxtFile_Wordclass</a>
  
    <li><a href="../../Word.html">Word</a>
  
    <li><a href="../../WordSequence.html">WordSequence</a>
  
  </ul>
</nav>

  </div>
</nav>

<div id="documentation">
  <h1 class="class">class Diff::LCS::ContextDiffCallbacks</h1>

  <div id="description" class="description">
    
<p>This will produce a compound array of contextual diff change objects. Each
element in the <a
href="DiffCallbacks.html#attribute-i-diffs">Diff::LCS::DiffCallbacks#diffs</a>
array is a “hunk” array, where each element in each “hunk” array is a
single change. Each change is a <a
href="ContextChange.html">Diff::LCS::ContextChange</a> that contains both
the old index and new index values for the change. The “hunk” provides the
full context for the changes. Both old and new objects will be presented
for changed objects. <code>nil</code> will be substituted for a discarded
object.</p>

<pre>seq1 = %w(a b c e h j l m n p)
seq2 = %w(b c d e f j k l m r s t)

diffs = Diff::LCS.diff(seq1, seq2, Diff::LCS::ContextDiffCallbacks)
  # This example shows a simplified array format.
  # [ [ [ '-', [  0, 'a' ], [  0, nil ] ] ],   # 1
  #   [ [ '+', [  3, nil ], [  2, 'd' ] ] ],   # 2
  #   [ [ '-', [  4, 'h' ], [  4, nil ] ],     # 3
  #     [ '+', [  5, nil ], [  4, 'f' ] ] ],
  #   [ [ '+', [  6, nil ], [  6, 'k' ] ] ],   # 4
  #   [ [ '-', [  8, 'n' ], [  9, nil ] ],     # 5
  #     [ '+', [  9, nil ], [  9, 'r' ] ],
  #     [ '-', [  9, 'p' ], [ 10, nil ] ],
  #     [ '+', [ 10, nil ], [ 10, 's' ] ],
  #     [ '+', [ 10, nil ], [ 11, 't' ] ] ] ]</pre>

<p>The five hunks shown are comprised of individual changes; if there is a
related set of changes, they are still shown individually.</p>

<p>This callback can also be used with <a
href="../LCS.html#method-i-sdiff">Diff::LCS#sdiff</a>, which will produce
results like:</p>

<pre>diffs = Diff::LCS.sdiff(seq1, seq2, Diff::LCS::ContextCallbacks)
  # This example shows a simplified array format.
  # [ [ [ &quot;-&quot;, [  0, &quot;a&quot; ], [  0, nil ] ] ],  # 1
  #   [ [ &quot;+&quot;, [  3, nil ], [  2, &quot;d&quot; ] ] ],  # 2
  #   [ [ &quot;!&quot;, [  4, &quot;h&quot; ], [  4, &quot;f&quot; ] ] ],  # 3
  #   [ [ &quot;+&quot;, [  6, nil ], [  6, &quot;k&quot; ] ] ],  # 4
  #   [ [ &quot;!&quot;, [  8, &quot;n&quot; ], [  9, &quot;r&quot; ] ],    # 5
  #     [ &quot;!&quot;, [  9, &quot;p&quot; ], [ 10, &quot;s&quot; ] ],
  #     [ &quot;+&quot;, [ 10, nil ], [ 11, &quot;t&quot; ] ] ] ]</pre>

<p>The five hunks are still present, but are significantly shorter in total
presentation, because changed items are shown as changes (“!”) instead of
potentially “mismatched” pairs of additions and deletions.</p>

<p>The result of this operation is similar to that of <a
href="SDiffCallbacks.html">Diff::LCS::SDiffCallbacks</a>. They may be
compared as:</p>

<pre class="ruby"><span class="ruby-identifier">s</span> = <span class="ruby-constant">Diff</span><span class="ruby-operator">::</span><span class="ruby-constant">LCS</span>.<span class="ruby-identifier">sdiff</span>(<span class="ruby-identifier">seq1</span>, <span class="ruby-identifier">seq2</span>).<span class="ruby-identifier">reject</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">action</span> <span class="ruby-operator">==</span> <span class="ruby-string">&quot;=&quot;</span> }
<span class="ruby-identifier">c</span> = <span class="ruby-constant">Diff</span><span class="ruby-operator">::</span><span class="ruby-constant">LCS</span>.<span class="ruby-identifier">sdiff</span>(<span class="ruby-identifier">seq1</span>, <span class="ruby-identifier">seq2</span>, <span class="ruby-constant">Diff</span><span class="ruby-operator">::</span><span class="ruby-constant">LCS</span><span class="ruby-operator">::</span><span class="ruby-constant">ContextDiffCallbacks</span>).<span class="ruby-identifier">flatten</span>

<span class="ruby-identifier">s</span> <span class="ruby-operator">==</span> <span class="ruby-identifier">c</span> <span class="ruby-comment"># -&gt; true</span>
</pre>

<h3 id="label-Use">Use</h3>

<p>This callback object must be initialised and can be used by the <a
href="../LCS.html#method-i-diff">Diff::LCS#diff</a> or <a
href="../LCS.html#method-i-sdiff">Diff::LCS#sdiff</a> methods.</p>

<pre>cbo = Diff::LCS::ContextDiffCallbacks.new
Diff::LCS.LCS(seq1, seq2, cbo)
cbo.finish</pre>

<p>Note that the call to <a
href="DiffCallbacks.html#method-i-finish">Diff::LCS::DiffCallbacks#finish</a>
is absolutely necessary, or the last set of changes will not be visible.
Alternatively, can be used as:</p>

<pre class="ruby"><span class="ruby-identifier">cbo</span> = <span class="ruby-constant">Diff</span><span class="ruby-operator">::</span><span class="ruby-constant">LCS</span><span class="ruby-operator">::</span><span class="ruby-constant">ContextDiffCallbacks</span>.<span class="ruby-identifier">new</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">tcbo</span><span class="ruby-operator">|</span> <span class="ruby-constant">Diff</span><span class="ruby-operator">::</span><span class="ruby-constant">LCS</span>.<span class="ruby-constant">LCS</span>(<span class="ruby-identifier">seq1</span>, <span class="ruby-identifier">seq2</span>, <span class="ruby-identifier">tcbo</span>) }
</pre>

<p>The necessary <a
href="DiffCallbacks.html#method-i-finish">Diff::LCS::DiffCallbacks#finish</a>
call will be made.</p>

<h3 id="label-Simplified+Array+Format">Simplified <a href="../../Array.html">Array</a> Format</h3>

<p>The simplified array format used in the example above can be obtained with:</p>

<pre class="ruby"><span class="ruby-identifier">require</span> <span class="ruby-string">'pp'</span>
<span class="ruby-identifier">pp</span> <span class="ruby-identifier">diffs</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">e</span><span class="ruby-operator">|</span> <span class="ruby-identifier">e</span>.<span class="ruby-identifier">map</span> { <span class="ruby-operator">|</span><span class="ruby-identifier">f</span><span class="ruby-operator">|</span> <span class="ruby-identifier">f</span>.<span class="ruby-identifier">to_a</span> } }
</pre>

  </div><!-- description -->

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    <!-- Methods -->
    
     <section id="public-instance-5Buntitled-5D-method-details" class="method-section section">
      <h3 class="section-header">Public Instance Methods</h3>

    
      <div id="method-i-change" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">change</span><span
            class="method-args">(event)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="change-source">
            <pre><span class="ruby-comment"># File lib/diff/lcs/callbacks.rb, line 231</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">change</span>(<span class="ruby-identifier">event</span>)
  <span class="ruby-ivar">@hunk</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Diff</span><span class="ruby-operator">::</span><span class="ruby-constant">LCS</span><span class="ruby-operator">::</span><span class="ruby-constant">ContextChange</span>.<span class="ruby-identifier">simplify</span>(<span class="ruby-identifier">event</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- change-source -->
          
        </div>

        

        
      </div><!-- change-method -->

    
      <div id="method-i-discard_a" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">discard_a</span><span
            class="method-args">(event)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="discard_a-source">
            <pre><span class="ruby-comment"># File lib/diff/lcs/callbacks.rb, line 223</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">discard_a</span>(<span class="ruby-identifier">event</span>)
  <span class="ruby-ivar">@hunk</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Diff</span><span class="ruby-operator">::</span><span class="ruby-constant">LCS</span><span class="ruby-operator">::</span><span class="ruby-constant">ContextChange</span>.<span class="ruby-identifier">simplify</span>(<span class="ruby-identifier">event</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- discard_a-source -->
          
        </div>

        

        
      </div><!-- discard_a-method -->

    
      <div id="method-i-discard_b" class="method-detail ">
        
        <div class="method-heading">
          <span class="method-name">discard_b</span><span
            class="method-args">(event)</span>
          <span class="method-click-advice">click to toggle source</span>
        </div>
        

        <div class="method-description">
          
          
          

          
          <div class="method-source-code" id="discard_b-source">
            <pre><span class="ruby-comment"># File lib/diff/lcs/callbacks.rb, line 227</span>
<span class="ruby-keyword">def</span> <span class="ruby-identifier">discard_b</span>(<span class="ruby-identifier">event</span>)
  <span class="ruby-ivar">@hunk</span> <span class="ruby-operator">&lt;&lt;</span> <span class="ruby-constant">Diff</span><span class="ruby-operator">::</span><span class="ruby-constant">LCS</span><span class="ruby-operator">::</span><span class="ruby-constant">ContextChange</span>.<span class="ruby-identifier">simplify</span>(<span class="ruby-identifier">event</span>)
<span class="ruby-keyword">end</span></pre>
          </div><!-- discard_b-source -->
          
        </div>

        

        
      </div><!-- discard_b-method -->

    
    </section><!-- public-instance-method-details -->
  
  </section><!-- 5Buntitled-5D -->

</div><!-- documentation -->


<footer id="validator-badges">
  <p><a href="http://validator.w3.org/check/referer">[Validate]</a>
  <p>Generated by <a href="https://github.com/rdoc/rdoc">RDoc</a> 3.11.
  <p>Generated with the <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish Rdoc Generator</a> 3.
</footer>

